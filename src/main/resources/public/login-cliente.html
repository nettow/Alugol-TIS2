<!DOCTYPE html>
<html lang="en">

<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="">
  <meta name="author" content="">

  <title>AluGol - Login</title>

  <!-- Bootstrap core CSS -->
  <link href="./css/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <!-- Bootstrap core JavaScript -->
  <script src="./css/vendor/jquery/jquery.min.js"></script>
  <script src="./css/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

  <!-- Plugin JavaScript -->
  <script src="./css/vendor/jquery-easing/jquery.easing.min.js"></script>

  <!-- Custom JavaScript for this theme -->
  <script src="js/scrolling-nav.js"></script>
  <!-- Custom styles for this template -->
  <link href="css/scrolling-nav.css" rel="stylesheet">


</head>

<body id="page-top">


  <!-- Navigation -->
  <nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top" id="mainNav">
    <div class="container">
      <a class="navbar-brand js-scroll-trigger" href="./index.html">Alugol</a>
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarResponsive"
        aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
    </div>
  </nav>

  <header class="bg-success text-white">
    <div class="container text-center col-lg-8">
      <h1>Login - Jogador</h1>
    </div>

  </header>

  <section id="login" class="bg-light">
    <div class="container">
      <div class="row">
        <div class="col-lg-8 mx-auto">
          <form class="form--register" id="form-add">
          <a href="./login-proprietario.html">Sou proprietário de quadra</a>
          <br>
          <p>E-mail</p>
          <input class="form-control input--register" id="email" type="text" name="email" placeholder="example@company.com">
          <br>
          <p>Senha</p>
          <input class="form-control input--register" id="pass" type="password" name="password">
          <br>
            <button class="btn btn-success input--main__style input--button" type="button" onclick="realizalogin()">Entrar</button>
          </form>
        </div>
      </div>
    </div>
  </section>


  <!-- Footer -->
  <footer class="py-5 bg-dark">
    <div class="container">
      <p class="m-0 text-center text-white">Copyright &copy; Alugol 2020</p>
      <div id="id"></div>
    </div>
    <!-- /.container -->
  </footer>


</body>

<script>

  function realizalogin(){
    const email = document.getElementById("email").value;
    const senha = document.getElementById("pass").value;
    var data = {};
    data.email = email;
    data.senha  = senha;
    var json = JSON.stringify(data);
    var http = new XMLHttpRequest();
    var url = 'http://localhost:6789/homeCliente';
    http.open('POST', url, true);
    http.send(json);

    http.onload = function() {
        var login = http.response;
        var obj = JSON.parse(login);
        if(obj.loginCorreto){
          sessionStorage.setItem('idCliente', obj.idCliente);
          location.href="perfil-cliente.html";
        }
        else{
            alert("Usuário não encontrado ! Confira seus dados.\nSe for proprietário clique em 'Sou proprietário de quadra'");
        }
    }

}

  </script>

</html>